# è‡ªç­¾åè¯ä¹¦ HTTPS é…ç½®æŒ‡å—

## å·²å®Œæˆé…ç½®

æ‚¨çš„é¡¹ç›®å·²é…ç½®ä¸ºä½¿ç”¨è‡ªç­¾åè¯ä¹¦åœ¨ `https://10.81.6.4` ä¸Šè¿è¡Œã€‚

## ç”Ÿæˆè¯ä¹¦ï¼ˆå·²å®Œæˆï¼‰

è¯ä¹¦å·²ç”Ÿæˆåœ¨ `certs/` ç›®å½•ä¸‹ï¼š
- `certs/cert.pem` - SSL è¯ä¹¦
- `certs/key.pem` - ç§é’¥

è¯ä¹¦æœ‰æ•ˆæœŸï¼š365 å¤©

## éƒ¨ç½²æ­¥éª¤

### 1. å¯åŠ¨æœåŠ¡

```bash
docker-compose up -d --build
```

### 2. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`https://10.81.6.4`

**é‡è¦**ï¼šé¦–æ¬¡è®¿é—®æ—¶ï¼Œæµè§ˆå™¨ä¼šæ˜¾ç¤º"ä¸å®‰å…¨"è­¦å‘Šï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚

### 3. ä¿¡ä»»è¯ä¹¦

#### Chrome/Edge:
1. ç‚¹å‡»"é«˜çº§"
2. ç‚¹å‡»"ç»§ç»­å‰å¾€ 10.81.6.4ï¼ˆä¸å®‰å…¨ï¼‰"

#### Firefox:
1. ç‚¹å‡»"é«˜çº§"
2. ç‚¹å‡»"æ¥å—é£é™©å¹¶ç»§ç»­"

## æ°¸ä¹…ä¿¡ä»»è¯ä¹¦ï¼ˆå¯é€‰ï¼‰

### Windows:
1. åŒå‡» `certs/cert.pem`
2. ç‚¹å‡»"å®‰è£…è¯ä¹¦"
3. é€‰æ‹©"æœ¬åœ°è®¡ç®—æœº"
4. é€‰æ‹©"å°†æ‰€æœ‰è¯ä¹¦æ”¾å…¥ä¸‹åˆ—å­˜å‚¨" â†’ "å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„"
5. å®Œæˆå®‰è£…

### macOS:
```bash
sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain certs/cert.pem
```

### Linux:
```bash
sudo cp certs/cert.pem /usr/local/share/ca-certificates/pighub.crt
sudo update-ca-certificates
```

## è¯ä¹¦ç»­æœŸ

è¯ä¹¦å°†åœ¨ 365 å¤©åè¿‡æœŸã€‚åˆ°æœŸå‰é‡æ–°è¿è¡Œç”Ÿæˆå‘½ä»¤ï¼š

```bash
openssl req -x509 -newkey rsa:4096 -nodes \
  -keyout certs/key.pem \
  -out certs/cert.pem \
  -days 365 \
  -subj "/CN=10.81.6.4"

# é‡å¯ Caddy
docker-compose restart caddy
```

## æ•…éšœæ’é™¤

### æ— æ³•è®¿é—® HTTPS

1. æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼š`docker-compose ps`
2. æŸ¥çœ‹ Caddy æ—¥å¿—ï¼š`docker-compose logs caddy`
3. ç¡®è®¤é˜²ç«å¢™å¼€æ”¾ 443 ç«¯å£

### è¯ä¹¦é”™è¯¯

1. ç¡®è®¤ `certs/` ç›®å½•å­˜åœ¨ä¸”åŒ…å« `cert.pem` å’Œ `key.pem`
2. æ£€æŸ¥æ–‡ä»¶æƒé™
3. é‡æ–°ç”Ÿæˆè¯ä¹¦

## æ³¨æ„äº‹é¡¹

- âœ… å›¾ç‰‡å¤åˆ¶åŠŸèƒ½ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼ˆHTTPS ç¯å¢ƒï¼‰
- âš ï¸ æµè§ˆå™¨ä¼šæ˜¾ç¤º"ä¸å®‰å…¨"è­¦å‘Šï¼ˆè‡ªç­¾åè¯ä¹¦çš„æ­£å¸¸è¡Œä¸ºï¼‰
- ğŸ”’ æ•°æ®ä¼ è¾“æ˜¯åŠ å¯†çš„ï¼Œåªæ˜¯è¯ä¹¦æœªè¢«å…¬å…± CA è®¤è¯
- ğŸ“± ç§»åŠ¨è®¾å¤‡è®¿é—®éœ€è¦æ‰‹åŠ¨ä¿¡ä»»è¯ä¹¦
